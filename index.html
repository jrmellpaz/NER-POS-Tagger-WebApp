<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Text Analysis Toolkit</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-brain"></i> Advanced Text Analysis Toolkit</h1>
            <p class="subtitle"><strong>Named Entity Recognition, Relation Extraction & Temporal Analysis</strong></p>
            <p class="subtitle2"><strong>by Figueroa, Lapaz, Abelido, Nunez</strong></p>
        </header>

        <div class="input-section">
            <div class="text-input">
                <div class="file-upload">
                    <input type="file" id="fileInput" accept=".txt,.docx,.pdf" style="display: none;">
                    <button id="uploadBtn" class="btn upload-btn">
                        <i class="fas fa-file-upload"></i> Upload File
                    </button>
                    <span id="fileName" class="file-name"></span>
                </div>
                <textarea id="inputText" placeholder="Enter your text here..."></textarea>
                <div class="controls">
                    <button id="analyzeBtn" class="btn analyze-btn">
                        <i class="fas fa-search"></i> Analyze Text
                    </button>
                    <button id="sampleBtn" class="btn sample-btn">
                        <i class="fas fa-lightbulb"></i> Load Sample
                    </button>
                    <button id="clearBtn" class="btn clear-btn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>
        </div>

        <div class="processing-section hidden" id="processingSection">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-text" id="progressText">Initializing analysis...</div>
            </div>
            <div class="processing-stats">
                <div class="stat-item">
                    <span class="stat-label">Status:</span>
                    <span class="stat-value" id="statusText">Ready</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Entities Found:</span>
                    <span class="stat-value" id="entitiesCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Relations Found:</span>
                    <span class="stat-value" id="relationsCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Processing Time:</span>
                    <span class="stat-value" id="processingTime">0ms</span>
                </div>
            </div>
        </div>

        <div class="results-section">
            <div class="tabs">
                <button class="tab-btn active" data-tab="entities"><i class="fas fa-user-tag"></i> Entities</button>
                <button class="tab-btn" data-tab="relations"><i class="fas fa-project-diagram"></i> Relations</button>
                <button class="tab-btn" data-tab="events"><i class="fas fa-calendar-alt"></i> Events</button>
                <button class="tab-btn" data-tab="temporal"><i class="fas fa-clock"></i> Temporal</button>
                <button class="tab-btn" data-tab="pos"><i class="fas fa-tags"></i> POS Tags</button>
            </div>

            <div class="tab-content active" id="entities">
                <div class="results-header">
                    <h3><i class="fas fa-user-tag"></i> Named Entities</h3>
                    <div class="filters">
                        <select id="entityTypeFilter">
                            <option value="all">All Types</option>
                            <option value="person">People</option>
                            <option value="organization">Organizations</option>
                            <option value="place">Places</option>
                            <option value="date">Dates</option>
                            <option value="value">Values</option>
                        </select>
                    </div>
                </div>
                <div class="results-container" id="entitiesResults"></div>
            </div>

            <div class="tab-content" id="relations">
                <div class="results-header">
                    <h3><i class="fas fa-project-diagram"></i> Extracted Relations</h3>
                </div>
                <div class="results-container" id="relationsResults"></div>
            </div>

            <div class="tab-content" id="events">
                <div class="results-header">
                    <h3><i class="fas fa-calendar-alt"></i> Event Extraction</h3>
                </div>
                <div class="results-container" id="eventsResults"></div>
            </div>

            <div class="tab-content" id="temporal">
                <div class="results-header">
                    <h3><i class="fas fa-clock"></i> Temporal Expressions</h3>
                </div>
                <div class="results-container" id="temporalResults"></div>
            </div>

            <div class="tab-content" id="pos">
                <div class="results-header">
                    <h3><i class="fas fa-tags"></i> Part-of-Speech Tags</h3>
                </div>
                <div class="results-container" id="posResults"></div>
            </div>
        </div>

        <footer>
            <p>Advanced Text Analysis Toolkit &copy; 2025 | Using the lightweight Compromise.js NLP library</p>
        </footer>
    </div>

    <!-- Load required libraries -->
    <script>
        // Function to handle script loading errors
        function handleScriptError(error) {
            console.error('Script loading error:', error);
            alert('Error loading required libraries. Please check your internet connection and refresh the page.');
        }
    </script>

    <!-- Load libraries with error handling -->
    <script src="https://cdn.jsdelivr.net/npm/compromise@14.8.0/builds/compromise.min.js" 
            onerror="handleScriptError('Failed to load Compromise.js')"></script>
    <script src="https://unpkg.com/compromise-dates" 
            onerror="handleScriptError('Failed to load Compromise-dates plugin')"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js" 
            onerror="handleScriptError('Failed to load TensorFlow.js')"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@1.3.3" 
            onerror="handleScriptError('Failed to load Universal Sentence Encoder')"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js" 
            onerror="handleScriptError('Failed to load Mammoth.js')"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" 
            onerror="handleScriptError('Failed to load PDF.js')"></script>

    <!-- Initialize PDF.js worker -->
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <!-- Load application script -->
    <script src="app.js"></script>
</body>
</html>